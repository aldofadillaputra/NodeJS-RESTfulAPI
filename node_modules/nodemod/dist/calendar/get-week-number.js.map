{"version":3,"file":"get-week-number.js","sourceRoot":"","sources":["../../src/calendar/get-week-number.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAE7C,SAAS,WAAW,CAAC,cAA8B,EAAE,IAAU;IAC7D,MAAM,EAAE,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;IAC5B,MAAM,EAAE,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;IACjC,MAAM,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;IAC7B,MAAM,CAAC,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IAE5B,QAAQ,cAAc,EAAE;QACtB,KAAK,kBAAkB;YACrB,OAAO,SAAS,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;QACtC,KAAK,mBAAmB;YACtB,OAAO,SAAS,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;QACtC,KAAK,iBAAiB;YACpB,OAAO,SAAS,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;QAClC;YACE,OAAO,IAAI,CAAC;KACf;AACH,CAAC;AAKD,MAAM,UAAU,aAAa,CAAC,cAA8B,EAAE,IAAU;IACtE,MAAM,QAAQ,GAAG,WAAW,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;IACnD,MAAM,cAAc,GAAG,SAAS,CAAC,QAAQ,CAAC,cAAc,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAClE,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,cAAc,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAEtE,OAAO;QACL,YAAY,EAAE,IAAI;QAClB,SAAS,EAAE,QAAQ;QACnB,UAAU,EAAE,EAAE;KACf,CAAC;AACJ,CAAC","sourcesContent":["import { WeekNumber, WeekNumberType } from './calendar_typing.js';\nimport { toUTCDate } from './to-utc-date.js';\n\nfunction toFixedDate(weekNumberType: WeekNumberType, date: Date): Date {\n  const wd = date.getUTCDay();\n  const fy = date.getUTCFullYear();\n  const m = date.getUTCMonth();\n  const d = date.getUTCDate();\n\n  switch (weekNumberType) {\n    case 'first-4-day-week':\n      return toUTCDate(fy, m, d - wd + 3);\n    case 'first-day-of-year':\n      return toUTCDate(fy, m, d - wd + 6);\n    case 'first-full-week':\n      return toUTCDate(fy, m, d - wd);\n    default:\n      return date;\n  }\n}\n\n/**\n * {@link https://bit.ly/2UvEN2y|Compute week number by type}\n */\nexport function getWeekNumber(weekNumberType: WeekNumberType, date: Date): WeekNumber {\n  const fixedNow = toFixedDate(weekNumberType, date);\n  const firstDayOfYear = toUTCDate(fixedNow.getUTCFullYear(), 0, 1);\n  const wk = Math.ceil(((+fixedNow - +firstDayOfYear) / 864e5 + 1) / 7);\n\n  return {\n    originalDate: date,\n    fixedDate: fixedNow,\n    weekNumber: wk,\n  };\n}\n"]}